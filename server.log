nohup: ignoring input
 * Serving Flask app 'server'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.41.139:5000
[33mPress CTRL+C to quit[0m
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 749-557-138
127.0.0.1 - - [20/Jul/2025 14:04:31] "GET /health HTTP/1.1" 200 -
2025-07-20 14:05:17,516 - mistral_finetuning_manager.130159006546256 - INFO - MistralFineTuningManager inizializzato - Ollama: http://localhost:11434
2025-07-20 14:05:17,516 - INFO - MistralFineTuningManager inizializzato - Ollama: http://localhost:11434
2025-07-20 14:05:17,516 - mistral_finetuning_manager.130159006546256 - INFO - Models directory: /home/ubuntu/classificazione_b+++++_bck2/Classification/../FineTuning/../finetuned_models
2025-07-20 14:05:17,516 - INFO - Models directory: /home/ubuntu/classificazione_b+++++_bck2/Classification/../FineTuning/../finetuned_models
2025-07-20 14:05:17,536 - intelligent_classifier.130160075485024 - INFO - IntelligentClassifier inizializzato - Model: mistral:7b, URL: http://localhost:11434
2025-07-20 14:05:17,536 - INFO - IntelligentClassifier inizializzato - Model: mistral:7b, URL: http://localhost:11434
2025-07-20 14:05:17,536 - intelligent_classifier.130160075485024 - INFO - Embedding features: False, Validation: False
2025-07-20 14:05:17,536 - INFO - Embedding features: False, Validation: False
2025-07-20 14:05:17,538 - intelligent_classifier.130160075485024 - WARNING - Modello mistral_finetuned_humanitas_20250720_135148 non trovato. Disponibili: ['mistral_finetuned_humanitas_20250720_135148:latest', 'mistral_finetuned_humanitas_20250720_134856:latest', 'mistral_finetuned_humanitas_20250720_134723:latest', 'mistral_finetuned_humanitas_20250720_134249:latest', 'mistral_finetuned_humanitas_20250720_134045:latest', 'mistral_finetuned_humanitas_20250720_133740:latest', 'mistral_finetuned_humanitas_20250720_133728:latest', 'mistral_finetuned_humanitas_20250720_133327:latest', 'mistral:7b', 'llama3.3:70b-instruct-q2_K', 'bge-m3:latest']
2025-07-20 14:05:17,538 - WARNING - Modello mistral_finetuned_humanitas_20250720_135148 non trovato. Disponibili: ['mistral_finetuned_humanitas_20250720_135148:latest', 'mistral_finetuned_humanitas_20250720_134856:latest', 'mistral_finetuned_humanitas_20250720_134723:latest', 'mistral_finetuned_humanitas_20250720_134249:latest', 'mistral_finetuned_humanitas_20250720_134045:latest', 'mistral_finetuned_humanitas_20250720_133740:latest', 'mistral_finetuned_humanitas_20250720_133728:latest', 'mistral_finetuned_humanitas_20250720_133327:latest', 'mistral:7b', 'llama3.3:70b-instruct-q2_K', 'bge-m3:latest']
127.0.0.1 - - [20/Jul/2025 14:05:17] "POST /classify/new/humanitas HTTP/1.1" 200 -
2025-07-20 14:05:17,828 - INFO - 127.0.0.1 - - [20/Jul/2025 14:05:17] "POST /classify/new/humanitas HTTP/1.1" 200 -
127.0.0.1 - - [20/Jul/2025 14:05:32] "GET /health HTTP/1.1" 200 -
2025-07-20 14:05:32,023 - INFO - 127.0.0.1 - - [20/Jul/2025 14:05:32] "GET /health HTTP/1.1" 200 -
Connessione al database TAG stabilita con successo
Connessione al database TAG chiusa
ğŸ¯ RICHIESTA CLASSIFICAZIONE INCREMENTALE:
   Cliente: humanitas
   Timestamp: 2025-07-20T14:05:13.262939
ğŸ”„ CLASSIFICAZIONE INCREMENTALE - Cliente: humanitas
ğŸ”§ Inizializzazione pipeline per cliente: humanitas
ğŸ”§ Inizializzazione embedder condiviso...
ğŸš€ Inizializzazione LaBSE embedder su device: cuda
ğŸ“¥ Caricamento modello sentence-transformers/LaBSE...
ğŸš€ Caricamento diretto su GPU...
âœ… Modello caricato con successo!
ğŸ“Š Dimensione embedding: 768
ğŸ”§ Device: cuda
ğŸ® GPU: NVIDIA A10G
ğŸ’¾ GPU Memory: 23.7 GB
ğŸ“ˆ GPU Memory utilizzata: 1.89 GB
ï¿½ Primo parametro su device: cuda:0
ğŸ§ª Test del modello LaBSE...
ğŸ” Encoding 3 testi su device cuda...
âœ… Embedding generati: shape (3, 768)
âœ… Test modello completato con successo!
   Shape: (3, 768)
   Norme: [1. 1. 1.]
   Device: cuda
ğŸ¯ Modello pronto per l'uso!
âœ… Embedder condiviso inizializzato
ğŸš€ Inizializzazione pipeline...
   ğŸ¯ Confidence threshold: 0.7
   ğŸ¤– Auto mode: True
   ğŸ”„ Auto retrain: False
ğŸ”„ Utilizzo embedder condiviso per evitare CUDA out of memory
ğŸ”§ HDBSCANClusterer inizializzato con parametri:
   min_cluster_size: 3
   min_samples: 2
   metric: cosine
   cluster_selection_epsilon: 0.05
ğŸ§  Inizializzazione memoria semantica...
ğŸ§  SemanticMemoryManager inizializzato
  ğŸ¯ Soglia riutilizzo etichette: 0.8
  ğŸ” Soglia similaritÃ  semantica: 0.8
  ğŸ’¾ Cache path: semantic_cache/
ğŸ”— Inizializzazione ensemble classifier avanzato...
ğŸ¯ Uso modello fine-tuned per humanitas: mistral_finetuned_humanitas_20250720_135148
âš ï¸ LLM non disponibile, ensemble userÃ  solo ML
ğŸ”— Advanced Ensemble Classifier inizializzato
   ğŸ§  LLM weight: 0.60
   ğŸ¤– ML weight: 0.40
   ğŸ¯ Confidence threshold: 0.7
   ğŸ”„ Adaptive weights: True
   ğŸ‘¤ Disaccordi gestiti da QualityGateEngine
ğŸ“¥ Caricamento ultimo modello: humanitas_fallback_classifier_20250720_093229
ğŸ“¥ Caricamento ensemble model...
âœ… ML ensemble caricato
âœ… Configurazione caricata
ğŸ”— Ensemble model caricato da models/humanitas_fallback_classifier_20250720_093229
âœ… Modello caricato con successo
â¸ï¸ Riaddestramento automatico disabilitato (modalitÃ  supervisione/API)
   ğŸ’¡ Per abilitare, usare auto_retrain=True nell'inizializzazione
âš ï¸ Classificatore LLM non disponibile, ensemble userÃ  solo ML
ğŸ‘¤ Inizializzazione trainer interattivo...
ğŸ§  Inizializzazione dedupplicatore intelligente...
ğŸ”„ Caricamento memoria semantica dal database...
Connessione al database TAG stabilita con successo
ğŸ“­ Nessuna classificazione trovata nel database
ğŸ“­ Inizializzata memoria semantica vuota
Connessione al database TAG chiusa
âœ… Memoria semantica caricata: 0 campioni, 0 tag
âœ… Pipeline inizializzata!
âœ… Pipeline humanitas inizializzata
ğŸ“Š Estrazione sessioni per humanitas...
ğŸ” Parametri: giorni_indietro=30, limit=None
ğŸ”„ Chiamata aggregator.estrai_sessioni_aggregate...
ğŸ“Š Estrazione sessioni aggregate dal schema 'humanitas'...
ğŸ” Esecuzione query per leggere conversazioni dal schema 'humanitas'...
Connessione al database MySQL stabilita con successo
âœ… Query eseguita con successo! Trovate 7067 righe
âœ… Trovate 7067 righe da aggregare
âœ… Aggregate 1350 sessioni uniche
ğŸ“¥ Sessioni grezze estratte: 1350
ğŸ” Filtraggio sessioni vuote/irrilevanti...
ğŸ” Filtraggio sessioni vuote/irrilevanti...
âœ… Filtro completato:
  ğŸ“Š Sessioni originali: 1350
  âŒ Sessioni scartate: 235
  âœ… Sessioni valide: 1115
âœ… Estratte 1115 sessioni valide
Connessione al database TAG stabilita con successo
Connessione al database TAG chiusa
ğŸ“Š Cliente humanitas: 1115 sessioni giÃ  processate
Connessione al database TAG stabilita con successo
Connessione al database TAG chiusa
